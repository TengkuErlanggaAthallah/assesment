<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-baxB/HV16TkBHy6Dg8M79SCGlv6oLpCKC/Joa5H4SSz7r0ZF4RHJrh8p+9S3GrfoeOst9dyeGOpqiNIVBae1jA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Food and Drink List</title>
    <style>
        body {
            background-color: #f8f9fa;
        }

        .sidebar {
            background-color: #333333; 
            color: #ffffff;
            height: 100vh;
        }

        .content {
            padding: 20px;
        }

        .item-box {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
        }

        .remove-btn {
            cursor: pointer;
        }

        .card {
            margin: 5px;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: scale(1.1);
        }

        .navbar {
            background-color: #343a40;
        }

        .btn-info {
            background-color: #007bff;
        }

        .sidebar-sticky a {
            color: #ffffff;
        }

        .navbar-nav li a {
            color: #ffffff;
        }
        .form-inline {
            display: flex;
            align-items: center;
        }

        .form-control {
            margin-right: 10px;
        }

    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                <li class="nav-item">
                    <h5 style="color: #ffffff;">Starbhak Mart</h5>
                </li>
                <li class="nav-item">
                    <form class="form-inline">
                        <input style="margin-left: 800px;" id="searchInput" class="form-control mr-sm-2" type="search" placeholder="Cari" aria-label="Cari">
                        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Cari</button>
                    </form>
                </li>

                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <nav style="height: 740px; width: 200px;" class="col-md-2 d-none d-md-block sidebar">
                <div class="sidebar-sticky">
                        <br>
                        <ul id="cart-list">
                        </ul>
                        <div class="container mt-3">
                            <p id="total">Total: Rp. 0,00</p>
                        </div>
                    </ul>
                    <div>
                        <hr>
                    </div>
                    <button type="button" class="btn btn-info" style="width: 150px; margin-left: 15px;">Buy</button>
                </div>
                <br>
                <div id="sidebar">
                    <p id="dynamicText"></p>
                </div>
            </nav>
            <main role="main" class="col-md-10 px-4">
                <div class="content">
                    <h2>Menu</h2>
                    <div class="row"> 
                        <div style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                            <div class="card">
                                <img src="assets/Makanan/ayam-penyet.jpg" class="card-img-top" alt="Ayam Penyet">
                                <div class="card-body">
                                    <h5 class="card-title">Ayam Penyet</h5>
                                    <p class="card-text">Rp. 20.000</p>
                                    <button class="btn btn-success add-to-cart">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                    <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                        <div class="card">
                            <img src="assets/Makanan/tempe.jpg" class="card-img-top" alt="Produk 1">
                            <div class="card-body">
                                <h5 class="card-title">tempe</h5>
                                <p class="card-text">Rp. 8.000</p>
                                <button class="btn btn-success add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                        <div class="card">
                            <img src="assets/Makanan/download.jpg" class="card-img-top" alt="Produk 1">
                            <div class="card-body">
                                <h5 class="card-title">sate</h5>
                                <p class="card-text">Rp. 18.000</p>
                                <button class="btn btn-success add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                        <div class="card">
                            <img src="assets/Makanan/paket-1.jpg" class="card-img-top" alt="Produk 1">
                            <div class="card-body">
                                <h5 class="card-title">paket 1</h5>
                                <p class="card-text">Rp. 200.000</p>
                                <button class="btn btn-success add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                        <div class="card">
                            <img src="assets/Makanan/paket-2.jpg" class="card-img-top" alt="Produk 1">
                            <div class="card-body">
                                <h5 class="card-title">paket-2</h5>
                                <p class="card-text">Rp. 275.000</p>
                                <button class="btn btn-success add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    </div>
                    <br><br><br><br><br><br><br>
                </div><div class="content">
                    <div class="row">
                        <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                            <div class="card">
                                <img src="assets/Minuman/boba.jpg" class="card-img-top" alt="Produk 1">
                                <div class="card-body">
                                    <h5 class="card-title">boba</h5>
                                    <p class="card-text">Rp. 10.000</p>
                                    <button class="btn btn-success add-to-cart">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                        <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                            <div class="card">
                                <img src="assets/Minuman/es-teh.jpg" class="card-img-top" alt="Produk 1">
                                <div class="card-body">
                                    <h5 class="card-title">es teh</h5>
                                    <p class="card-text">Rp. 5.000</p>
                                    <button class="btn btn-success add-to-cart">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                        <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                            <div class="card">
                                <img src="assets/Minuman/lemon.jpg" class="card-img-top" alt="Produk 1">
                                <div class="card-body">
                                    <h5 class="card-title">lemon</h5>
                                    <p class="card-text">Rp. 7.000</p>
                                    <button class="btn btn-success add-to-cart">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                        <div  style="height: 100px; width: 175px;" class="col-md-4 mb-3">
                            <div class="card">
                                <img src="assets/Minuman/milk-shake-coklat.jpg" class="card-img-top" alt="Produk 1">
                                <div class="card-body">
                                    <h5 class="card-title">coklat</h5>
                                    <p class="card-text">Rp. 13.000</p>
                                    <button class="btn btn-success add-to-cart">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>
    $(document).ready(function () {
        $(".add-to-cart").on("click", function () {
            var productName = $(this).siblings(".card-title").text();
            var productPrice = parseFloat($(this).siblings(".card-text").text().replace("Rp. ", "").replace(".", "").replace(",", "."));
            addToCart(productName, productPrice);
        });

        $("#cart-list").on("click", ".remove-btn", function () {
            $(this).parent().remove();
            calculateTotal();
        });

        $(".form-inline").submit(function (event) {
        event.preventDefault();
        var searchTerm = $("#searchInput").val().toLowerCase();
        searchAndDisplayResults(searchTerm);
        });

        $(".btn-info").on("click", function () {
            if ($("#cart-list li").length > 0) {
                showThankYouNotification();
            } else {
                alert("Keranjang masih kosong. Silakan tambahkan item ke keranjang terlebih dahulu.");
            }
        });
    });

    function addToCart(name, price) {
        var listItem = $("<li>").text(name + " - Rp. " + price.toLocaleString());

        var removeBtn = $("<button>").text("Hapus").addClass("remove-btn btn btn-danger btn-sm ml-2");
        listItem.append(removeBtn);

        $("#cart-list").append(listItem);
        calculateTotal();
    }

    function calculateTotal() {
        var total = 0;
        $("#cart-list li").each(function () {
            var price = parseFloat($(this).text().split("Rp. ")[1].replace(".", "").replace(",", "."));
            total += price;
        });

        var tax = 0.1 * total;

        var totalAmount = total + tax;

        $("#total").text("Total: Rp. " + totalAmount.toLocaleString('id-ID', { minimumFractionDigits: 2 }) + "0");
    }
    
    function showThankYouNotification() {
    var totalAmount = $("#total").text().replace("Total: Rp. ", "");
    var formattedTotalAmount = parseFloat(totalAmount.replace(",", "")).toLocaleString('id-ID', { minimumFractionDigits: 2 });
    
    formattedTotalAmount = formattedTotalAmount.padStart( + formattedTotalAmount.length, '0');

    localStorage.setItem("totalAmount", formattedTotalAmount);

    swal({
        title: "Terima kasih!",
        text: "Terima kasih telah membeli di Starbhak Mart!",
        icon: "success",
    }).then((value) => {
        if (value) {
            window.location.href = "halaman_proses.html";
        }
    });
}
function searchAndDisplayResults(searchTerm) {
    console.log("Search Term:", searchTerm);
    // Hapus hasil pencarian sebelumnya
    $(".content .row").empty();

    // Loop melalui semua produk
    $(".content .row .col-md-4").each(function () {
        var productName = $(this).find(".card-title").text().toLowerCase().trim();
        console.log("Product Name:", productName);

        // Jika nama produk mengandung kata kunci pencarian, tampilkan
        if (productName.includes(searchTerm)) {
            // Kloning dan menampilkan kartu produk yang sesuai
            var clonedCard = $(this).clone();  // Menggunakan clone() dari jQuery
            $(".content .row").append('<div style="height: 100px; width: 175px;" class="col-md-4 mb-3">' + clonedCard.prop('outerHTML') + '</div>');
        }
    });
}

</script>

</html>
